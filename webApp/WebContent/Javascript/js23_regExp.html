<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        //정규표현식
        var data= "javascript expression Test"; // 

        //slash를 를 기준으로 내가 찾는 문자를 /test/ 이런식으로 씀, 대소문자 구분
        var exp = /test/i; //i : 대소문자 구별없이 체크

        var result = exp.test(data);

        console.log('result->',result); //result -> true

           //변수 
            // var : 변수를 여러 번 선언 가능하다.
            // let : 한 번만 선언한다.
            // const : 값을 변경할 수 없다.

            var a; var a;
            let b; //let b;
            const c= 500;

        function regExpChk(){
            // 아이디 - 8글자 15글자 사이, 첫번째 영어, 영어 ,숫자, _ 만 허용
            // ^첫번째 문자부터 체크, $ 마지막글자까지 검사 , \w: 영어 대소문자, 숫자, _ 를 뜻합니다.
            // var reg=/^[a-zA-Z]{1}[a-zA-z0-9_]{7,14}$/; // 영어 대소문자 a부터 z까지 a-zA-Z , {한자리는 영어로} 한글은: 가-힣 
           var reg=/^[a-zA-Z]{1}\w{7,14}$/;   // 위랑 같은 결과 
            
          
            //아이디
            if(!reg.test(document.getElementById('userid').value)){ //괄호안에 아이디
                    //틀릴 때 참
                    alert("아이디는 8~15글자 사이로 입력해주세요.\n 영어, 숫자, _ 만 허용합니다.");
                    return false;
            }
            //이름
            reg =/^[가-힣A-Z]{2,10}$/i; // 한글과 영어  
            if(! reg.test(document.getElementById('username').value)){
                alert("이름을 잘못 입력하였습니다.");  // 확인을 위해 아이디에 value="a12345678" 기본데이터 넣어놓음
                return false;
            }

            //주민등록번호 - 12(1900년대)34(2000)56(1900년대,외국인)78(2000외국)90(그이전)
            var jumin =document.getElementById("jumin1").value+"-"+document.getElementById("jumin2").value;
            reg= /[0-9]{2}[01][0-9]{1}[0-3]{1}[0-9]{1}[-][1-8]{1}[0-9]{6}/; // 한자리씩
          //  reg = /[0-9]{2}[01][0-9]{1}[0-3]{1}[0-9]{1}-[1-8]{1}[0-9]{6}/;
           
            if(!reg.test(jumin)){
               alert("주민번호를 잘못 입력하였습니다.");
               return false;
           }

           // 이메일
           // id = 영어,숫자, _ ->\w , @무조건, 도메인 2-10 글자까지, 소수점 반드시 한개는 포함
           //()? : 데이터가 있을 수도 있고, 없을 수도 있다. 
           reg=/^\w{8,20}[@][a-zA-z]{2,10}[.][a-zA-Z]{2,3}([.][a-zA-Z]{2,3})?$/;
           if(!reg.test(document.getElementById("email").value)){
               alert("이메일이 잘못 입력되었습니다.");
               return false;
           } 
           
           //전화번호 
           var tel =document.getElementById("tel1").value+"-"+document.getElementById("tel2").value+"-"+document.getElementById("tel3").value;
           reg =/(010|02|031|032|041)[-][0-9]{3,4}[-][0-9]{4}/; // (||) 또는, 중에 한 개 
           if(!reg.test(tel)){
                alert("전화번호를 잘못 입력하였습니다.");
                return false;
           }
           return true;//다음페이지 이동
        }
        function cursorMove(inputTag, cnt, nextTag){// this로 아래에서 input부분을 받아서여기로 넘김, 글자수, id 3개의 매개변수
            // 주민번호 - 키 눌렀다가 놓으면 onkeyup
            var val =inputTag.value;
            if(val.length == cnt){
                document.getElementById(nextTag).focus();

            }
        }
    </script>
</head>
<body>
    <h1>정규표현식을 이용한 유효성 검사</h1>
    <form method="post" action="abcd.jsp" onsubmit="return regExpChk()">
        <ul>
            <li>아이디</li><li><input type="text" name="userid" id="userid" value="a12345678"/> </li>
            <li> 이름</li><li><input type="text" name="username" id="username"value="김라떼"/></li>
            <li>주민번호</li><li><input type="text" name="jumin1" id="jumin1" value="800101" onkeyup="cursorMove(this,6,'jumin2')"/> -
                                 <input type="text" name="jumin2" id="jumin2" value="2123456" onkeyup="cursorMove(this,7,'email')"/></li>
            <li>이메일</li><li><input type="text" name="email" id="email" value="lattelatte@coffee.com" size="30"/></li>  
            <li>전화번호</li><li><input type="text" name="tel1" id="tel1" onkeyup="cursorMove(this,3,'tel2')"/>-
                                <input type="text" name="tel2" id="tel2" maxlength="4" onkeyup="cursorMove(this,4,'tel3')"/>-
                                <input type="text" name="tel3" id="tel3"/></li>
        </ul>
        <input type="submit" value="등록"/>
    </form>
</body>
</html>